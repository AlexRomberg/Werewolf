import{P as se,a as G,b as ne,e as h}from"./chunk-S6VIYWOS.js";var p=function(i){return i[i.Love=0]="Love",i[i.Trust=1]="Trust",i[i.Sleepover=2]="Sleepover",i;}(p||{}),n=function(i){return i[i.Wolves=0]="Wolves",i[i.Active=1]="Active",i[i.Passive=2]="Passive",i[i.Loners=3]="Loners",i;}(n||{}),s=function(i){return i[i.BaseGame=0]="BaseGame",i[i.NewMoon=1]="NewMoon",i[i.Characters=2]="Characters",i[i.Special=3]="Special",i;}(s||{}),c=function(i){return i[i.Initial=0]="Initial",i[i.Wolf=50]="Wolf",i[i.PostWolf=100]="PostWolf",i;}(c||{}),f=function(i){return i[i.DiedGotKilled=0]="DiedGotKilled",i[i.DiedSleptWithVictim=1]="DiedSleptWithVictim",i[i.DiedOfBrokenHeart=2]="DiedOfBrokenHeart",i[i.TurnedIntoWolf=3]="TurnedIntoWolf",i;}(f||{}),de=function(i){return i[i.PeopleSelection=0]="PeopleSelection",i[i.PersonDetails=1]="PersonDetails",i[i.CharacterDetails=2]="CharacterDetails",i[i.Confirm=3]="Confirm",i[i.Changes=4]="Changes",i;}(de||{});var ae={rules:"Regeln & Anfang",night:"D\xE4mmerung",day:"Tagesanbruch",angel:"Der Engel",bear_guide:"Der B\xE4renf\xFChrer",big_wolf:"Der Grosse, b\xF6se Wolf",hoodrat:"Die Dorfmatratze",brothers:"Die Drei Br\xFCder",cupid:"Der Amor",flute_player:"Der Fl\xF6tenspieler",fox:"Der Fuchs",healer:"Der Heiler",hunter:"Der J\xE4ger",judge:"Der Richter",juggler:"Der Gaukler",knight:"Der Ritter der rostigen Klinge",maid:"Die Ergebene Magd",old_man:"Der Alte",bitter_old_man:"Der Verbitterte Greis",primal_wolf:"Der Urwolf",scapegoat:"Der S\xFCndenbock",seer:"Die Seherin",sisters:"Die Zwei Geschwister",small_child:"Das kleine M\xE4dchen",thief:"Der Dieb",village_idiot:"Der Dorfdepp",villager:"Der Einfache Dorfbewohner",werewolf:"Der Einfache Werewolf",white_wolf:"Der weisse Wolf",wild_child:"Das wilde Kind",witch:"Die Hexe",wolfdog:"Der Wolfshund"},we={[n.Wolves]:"Werw\xF6lfe",[n.Active]:"Aktive",[n.Passive]:"Passive",[n.Loners]:"Einzelg\xE4nger"},ze={[s.BaseGame]:"Grundspiel",[s.NewMoon]:"Neumond",[s.Characters]:"Charaktere",[s.Special]:"Spezielle"},be={[f.DiedGotKilled]:"gestorben (Opfer von Werwolf/Hexe)",[f.DiedOfBrokenHeart]:"gestorben (Liebeskummer)",[f.DiedSleptWithVictim]:"gestorben (War im Haus des Ofers)",[f.TurnedIntoWolf]:"verwandelt in Werewolf (NICHT SAGEN)"};var oe={spotify:{clientId:"bd8b387ab37c4b43a990548365142512",redirectUri:"https://wolf.aro-playground.ch/spotify",authUrl:"https://accounts.spotify.com/authorize",tokenUrl:"https://accounts.spotify.com/api/token",apiBaseUrl:"https://api.spotify.com/v1",playlists:{start:"7MZroPhY9XfndSpZXlWqFL",special:"45oHQwFkR2ylWUieL1SHoO",general:"4ye5jeTcpDzl59S7zPhzP0"}},isTesting:!1};var l=i=>({Title:"Person zuweisen",Action:r=>h(void 0,[r],function*({GameState:e,Dialog:t}){try{let a=yield t.ShowPeopleSelectionDialog("Person ausw\xE4hlen",1);console.log("closed",a);for(let d of e.getPeopleForCharacter(i)??[])d.Character=void 0;a[0].Character=i;}catch{}})}),z=(i,e)=>({Title:"Personen zuweisen",Action:a=>h(void 0,[a],function*({GameState:t,Dialog:r}){try{let d=yield r.ShowPeopleSelectionDialog("Personen ausw\xE4hlen",e);for(let u of t.getPeopleForCharacter(i)??[])u.Character=void 0;for(let u of d)u.Character=i;}catch{}})});var o=class{get isAssigned(){return this.gameState.getPeopleForCharacter(this).length>0;}constructor(e){this.gameState=e,this.IsSingle=!0,this.Priority=-1,this.IsAwakeThisNight=(t,r)=>!1,this.resetAfterNight=()=>{},this.GetActions=()=>[],this.GetButtons=()=>[];}};var b=class extends o{constructor(){super(...arguments),this.Id="bear_guide",this.Group=n.Passive,this.Game=s.Characters,this.Priority=c.Initial+9,this.Description=[{title:"Allgemein",description:"Jeden Morgen, direkt nach der Verk\xFCndung der n\xE4chtlichen Opfer, brummt der Spielleiter wie ein B\xE4r, sollte einer der direkten Nachbarn des B\xE4renf\xFChrers ein Werwolf sein. Dabei werden nur Nachbarn ber\xFCcksichtigt, die noch im Spiel sind."},{title:"Tipp f\xFCr den Spielleiter",description:"Es vereinfacht das Spiel, wenn ausgeschiedene Spieler nicht weiter in der Runde der aktiven Spieler sitzen bleiben. Ist der B\xE4renf\xFChrer selbst vom Urwolf infiziert, brummst du jede Runde, solange bis der B\xE4renf\xFChrer ausgeschieden ist."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Wenn dieser neben Werwolf sitzt oder infiziert ist, am Morgen das Dorf informieren"],this.GetButtons=()=>this.isAssigned?[]:[l(this)],this.IsAwakeThisNight=e=>e<=0;}};var g=class i extends o{isWerewolf(e){return e.Character instanceof i||e.IsWerewolf;}};var P=class{constructor(e){this.gameState=e,this.Id="rules",this.GetActions=()=>["Regeln erkl\xE4ren",this.getWerewolfCharacters().length>0&&"Anzahl Werw\xF6lfe erw\xE4hnen ("+this.gameState.SelectedCharacters.filter(t=>t instanceof g).map(t=>ae[t.Id]).join(", ")+")","Einleitende Geschichte erz\xE4hlen"],this.GetButtons=()=>[],this.getWerewolfCharacters=()=>this.gameState.SelectedCharacters.filter(t=>t instanceof g);}},ce={Id:"night",GetActions:()=>["Und das Dorf schl\xE4ft ein"],GetButtons:()=>[]},C=class{constructor(e){this.gameState=e,this.Id="day",this.GetActions=()=>["Und das Dorf erwacht",this.gameState.Changes.length>0&&"Informiere \xFCber Tode (\xC4nderungen anzeigen)",this.gameState.Changes.length<=0&&"Keine Tode in der Nacht",this.gameState.SelectedCharacters.some(t=>t instanceof b)&&"Denke an den B\xE4renf\xFChrer","Leite Diskussion ein"],this.GetButtons=()=>this.gameState.Changes.length>0?[{Title:"\xC4nderungen anzeigen",Action:({Dialog:t})=>{t.ShowChangesDialog(this.gameState.Changes);}}]:[];}};var k=class extends o{constructor(){super(...arguments),this.Id="angel",this.Group=n.Loners,this.Game=s.Characters,this.Description=[{title:"Allgemein",description:"Ist dieser Charakter im Spiel, so beginnt die erste Runde immer mit einem Tag und der dazugeh\xF6rigen Abstimmung - noch bevor die erste Nacht anbricht und die Sondercharaktere das erste Mal aufgerufen werden. Gelingt es dem Engel, in dieser Abstimmung das Misstrauen des Dorfes auf sich zu ziehen oder w\xE4hrend der ersten Nacht Ziel der verschlingenden Vergeltung der Lykanthropen zu werden und auf diese oder jene Weise auszuscheiden, so gewinnt er das Spiel. Der Spielleiter kann danach sofort ein neues Spiel beginnen. Passiert dies nicht, so wandelt sich der Engel in einen normalen Dorfbewohner, welchen er bis zum Ende des Spiels oder bis zu seinem Tode verk\xF6rpert."},{title:"Tipp f\xFCr den Spielleiter",description:"Z\xF6gern Sie nicht, am ersten Tag an die m\xF6gliche Anwesenheit des Engels zu erinnern! Die Diskussionen sind dann lebhafter, und die Sch\xF6nredner werden durch diese himmlische Bedrohung gesch\xFCtzt."}];}};var W=class extends g{constructor(){super(...arguments),this.Id="big_wolf",this.Group=n.Wolves,this.Game=s.Characters,this.Priority=c.Wolf+4,this.Description=[{title:"Allgemein",description:"Jede Nacht erwacht der Grosse, b\xF6se Wolf mit den anderen W\xF6lfen und sucht sich ein Opfer. Doch solange kein Werwolf, das Wilde Kind (als Wolf) oder der Wolfshund (als Wolf) eliminiert wurde, erwacht er direkt im Anschluss an die Wolfsphase erneut, aber alleine, und sucht sich ein weiteres Opfer. Er darf keinen Werwolf fressen."}],this.isDone=!1,this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.isDone&&"Kann zweites Opfer definieren"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),this.isDone||e.push({Title:"Zweites Opfer markieren",Action:this.registerVictim.bind(this)}),e;},this.IsAwakeThisNight=(e,t)=>!t.People.some(r=>r.IsDead&&this.isWerewolf(r)),this.resetAfterNight=()=>this.isDone=!1;}registerVictim(t){return h(this,arguments,function*({Dialog:e}){try{let r=yield e.ShowPeopleSelectionDialog("W\xE4hle das zweite Opfer (kein Werwolf) aus",1);if(r[0].IsProtected||r[0].IsVictim)return;r[0].IsVictim=!0,this.isDone=!0;}catch{}});}};var I=class extends o{constructor(){super(...arguments),this.Id="hoodrat",this.Group=n.Active,this.Game=s.Special,this.Priority=c.Initial+11,this.Description=[{title:"Allgemein",description:"Wenn die Dorfmatratze nachts vor den Werw\xF6lfen aufgerufen wird, kann sie w\xE4hlen ob sie bei einem anderen Spieler diese nacht unterkommt. Sollte dieser Spieler in der Nacht sterben, stirbt sie mit. Wird die Dorfmatratze von den Werw\xF6lfen heimgesucht w\xE4hrend sie bei einem anden Spieler ist, beleibt sie verschont."},{title:"Achtung",description:"Die Dorfmatratze kann auch bei sich Zuhause bleiben. Sie darf nicht in zwei aufeinanderfolgenden N\xE4chten bei demselben Spieler \xFCbernachten. Tr\xE4nke der Hexe und der Schutz des Heilers werden von dem Spieler auf die Dorfmatratze angewendet, jedoch nicht umgekeht."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.isDone&&"Kann neues Zuhause suchen f\xFCr die Nacht",this.isDone&&"Ist fertig f\xFCr diese Nacht"],this.GetButtons=()=>{let e=[];return this.isAssigned?this.isDone||e.push({Title:"Gastgeber zuweisen",Action:this.requestHostPerson.bind(this)}):e.push(l(this)),e;},this.IsAwakeThisNight=()=>!0,this.resetAfterNight=()=>{this.gameState.removeConnection(p.Sleepover);};}get isDone(){return this.gameState.Connections.some(e=>e.ConnectionType===p.Sleepover);}requestHostPerson(r){return h(this,arguments,function*({Dialog:e,GameState:t}){try{let a=yield e.ShowPeopleSelectionDialog("Eine Person ausw\xE4hlen",1);if(a[0]===this.lastJoinedPerson&&!(yield e.ShowConfirmDialog("Es darf nicht zwei mal hinter einander die gleiche Person gew\xE4hlt werden. Trotzdem fortfahren?")))return;this.lastJoinedPerson=a[0],t.addConnection(p.Sleepover,this.gameState.getPeopleForCharacter(this)[0],a[0]);}catch{}});}};var y=class extends o{constructor(){super(...arguments),this.Id="brothers",this.Group=n.Active,this.Game=s.Characters,this.Priority=c.Initial+7,this.IsSingle=!1,this.Description=[{title:"Allgemein",description:"Die Drei Br\xFCder sind vom selben Schlag wie die anderen Dorfbewohner und ziehen am selben Strang. In der ersten Nacht, nach Aufruf durch den Spielleiter, erwachen die Br\xFCder, um sich gegenseitig kennenzulernen. Der Spielleiter kann in erfahrenen Runden die Drei Br\xFCder von Zeit zu Zeit (jede zweite Runde oder je nach Belieben) wecken, um ihnen eine schnelle und leise Absprache des weiteren Vorgehens zu erm\xF6glichen."},{title:"Tipp f\xFCr den Spielleiter",description:"Ebenso wie die Zwei Schwestern sind die Drei Br\xFCder ein m\xE4chtiges Instrument in H\xE4nden von Spielern, welche die Geb\xE4rdensprache beherrschen. Sie sollten nur in grossen Spielrunden eingesetzt werden. In sehr grossen Runden ist es empfehlenswert, auch die Zwei Schwestern hinzuzunehmen."}],this.GetActions=()=>[this.gameState.getPeopleForCharacter(this).length!==3&&"Personen zuweisen","D\xFCrfen sich untereinander austauschen"],this.GetButtons=()=>this.gameState.getPeopleForCharacter(this).length===3?[]:[z(this,3)],this.IsAwakeThisNight=e=>e%2===0;}};var T=class extends o{constructor(){super(...arguments),this.Id="cupid",this.Group=n.Active,this.Game=s.BaseGame,this.Priority=c.Initial+3,this.Description=[{title:"Allgemein",description:"In der ersten Nacht (Einleitungsrunde) bestimmt er die zwei Spieler (egal welchen Geschlechts), die sich ineinander verlieben. Amor kann auch sich selbst als einen der Verliebten w\xE4hlen. Wenn einer der beiden Verliebten ausscheidet, stirbt der andere Verliebte aus Kummer und scheidet ebenfalls sofort aus. Ein Verliebter darf nie gegen seinen Verliebten stimmen oder ihm auf eine andere Weise schaden (auch nicht zur T\xE4uschung)."},{title:"Achtung",description:"Wenn einer der beiden Verliebten ein Werwolf und der andere ein Dorfbewohner ist, haben diese beiden Spieler ein neues Spielziel: Um gemeinsam in Liebe weiterleben zu k\xF6nnen und das Spiel zu gewinnen, m\xFCssen sie alle anderen Spieler, sowohl Dorfbewohner als auch Werw\xF6lfe, unter Beachtung der Spielregeln eliminieren."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.isDone&&"Muss ein Paar bestimmen","Das Paar muss erwachen"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),this.isDone||e.push({Title:"Paar zuweisen",Action:this.requestCouple.bind(this)}),e;},this.IsAwakeThisNight=e=>e===0;}get isDone(){return this.gameState.Connections.some(e=>e.ConnectionType===p.Love);}requestCouple(r){return h(this,arguments,function*({GameState:e,Dialog:t}){try{let a=yield t.ShowPeopleSelectionDialog("Ein Paar ausw\xE4hlen",2);e.addConnection(p.Love,a[0],a[1]);}catch{}});}};var x=class extends o{constructor(){super(...arguments),this.Id="flute_player",this.Group=n.Loners,this.Game=s.NewMoon,this.Priority=c.PostWolf+2,this.Description=[{title:"Allgemein",description:"Jede Nacht bestimmt der Fl\xF6tenspieler beim Aufruf des Spielleiters zwei Spieler, deren Schulter der Spielleiter ber\xFChrt. Der Fl\xF6tenspieler schl\xE4ft wieder ein. Der Spielleiter gibt den neuen und den bereits Verzauberten die Anweisung zu erwachen. Sie erkennen sich und schlafen wieder ein. Ab dem Zeitpunkt an dem es keine Spieler mehr gibt, die nicht verzaubert sind, gewinnt der Fl\xF6tenspieler gegen alle anderen Spieler (selbst wenn dies durch eine Abstimmung oder Dank der Werw\xF6lfe geschieht)."},{title:"Achtung",description:"Der Fl\xF6tenspieler kann sich nicht selbst verzaubern. Der Heiler sch\xFCtzt nicht vor der Verzauberung, und die Hexe kann die Verzauberung nicht heilen. Die Werw\xF6lfe sind gegen die Verzauberung nicht immun. Die verzauberten Spieler behalten all ihre F\xE4higkeiten und Eigenschaften. Die Verzauberung \xFCbertr\xE4gt sich nicht zwischen Verliebten."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Kann zwei Personen verzaubern"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),this.isDone||e.push({Title:"Opfer markieren",Action:this.registerVictim.bind(this)}),e;},this.IsAwakeThisNight=()=>!0;}get isDone(){return this.gameState.People.some(e=>e.IsEnchanted);}registerVictim(t){return h(this,arguments,function*({Dialog:e}){try{let r=yield e.ShowPeopleSelectionDialog("W\xE4hle zwei Opfer aus",2);for(let a of r)a.IsEnchanted=!0;}catch{}});}};var N=class extends o{constructor(){super(...arguments),this.Id="fox",this.Group=n.Active,this.Game=s.Characters,this.Priority=c.Initial+5,this.Description=[{title:"Allgemein",description:"In der Nacht, durch Aufruf des Spielleiters, erwacht der Fuchs und darf eine Gruppe dreier Nachbarn w\xE4hlen, indem er auf die mittlere Person zeigt. Findet sich in dieser Gruppe mindestens ein Werwolf, zeigt ihm der Spielleiter dies an. In diesem Fall darf der Fuchs seine F\xE4higkeit in der folgenden Nacht erneut anwenden. Sollte sich kein Werwolf in der gew\xE4hlten Gruppe befinden, verliert der Fuchs seine Kr\xE4fte. Jedoch besitzt er nun die wertvolle Information, welche drei Spieler \xFCber jeden Verdacht erhaben sind."},{title:":@@character-description-hint:Hinweis",description:"Der Spielleiter ruft den Fuchs zwar in jeder Nacht auf, doch dieser muss seine Sonderf\xE4higkeit nicht jede Nacht nutzen."},{title:"Tipp f\xFCr den Spielleiter",description:"Dem Fuchs werden nicht die Karten der gew\xE4hlten Spieler gezeigt, er erh\xE4lt lediglich die Information, ob sich (mindestens) ein Werwolf unter ihnen befindet oder nicht."}],this.hasMisssed=!1,this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.hasMisssed&&this.gameState.Round>0&&"Darf auf Person zeigen. Wenn diese / einer ihrer Nachbarn ein Werwolf ist, best\xE4tigen",this.hasMisssed&&"Hat keine Funktion mehr in dieser Nacht"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),!this.hasMisssed&&this.gameState.Round>0&&e.push({Title:"Hat verfehlt",Action:()=>{this.hasMisssed=!0;}}),e;},this.IsAwakeThisNight=()=>!this.hasMisssed;}};var S=class extends o{constructor(){super(...arguments),this.Id="small_child",this.Group=n.Active,this.Game=s.BaseGame,this.Description=[{title:"Allgemein",description:"Das Kleine M\xE4dchen darf die Werw\xF6lfe w\xE4hrend ihrer Wachphase mit halbge\xF6ffneten Augen ausspionieren. Wenn es aber dabei von den Werw\xF6lfen erwischt wird, darf es sofort (ger\xE4uschlos) anstelle des urspr\xFCnglich vorgesehenen Opfers aufgefressen werden und scheidet aus. Das M\xE4dchen kann nur nachts w\xE4hrend der Wachphase der Werw\xF6lfe spionieren. Auf keinen Fall darf es sich als Werwolf ausgeben und die Augen weit \xF6ffnen."}];}};var V=class extends o{constructor(){super(...arguments),this.Id="healer",this.Group=n.Active,this.Game=s.NewMoon,this.Priority=c.Initial+10,this.Description=[{title:"Allgemein",description:"Wenn der Heiler nachts vor den Werw\xF6lfen aufgerufen wird, zeigt er dem Spielleiter einen Spieler. Der so bestimmte Spieler wird in dieser Nacht (und nur in dieser Nacht) gegen die Werw\xF6lfe gesch\xFCtzt sein. Wenn er von ihnen als Opfer ausgew\xE4hlt wird, scheidet er nicht aus dem Spiel aus."},{title:"Achtung",description:"Der Heiler hat das Recht, sich selbst zu sch\xFCtzen. Der Heiler darf nicht in zwei aufeinanderfolgenden N\xE4chten denselben Spieler sch\xFCtzen. Der Schutz des Heilers hat keinerlei Auswirkung auf das Kleine M\xE4dchen. (Sie befindet sich derzeit in einer totalen Pubert\xE4tskrise und es gibt nichts, was sie davon abhalten k\xF6nnte, \xC4rger zu suchen.) Der Heiler kann weder vor dem Fl\xF6tenspieler noch vor der Infektion durch den Urwolf sch\xFCtzen."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.isDone&&"Kann eine Person ausw\xE4hlen die unsterblich ist diese Nacht",this.isDone&&"Ist fertig f\xFCr diese Nacht"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),this.isDone||e.push({Title:"Person sch\xFCtzen",Action:this.requestProtectedPerson.bind(this)}),e;},this.IsAwakeThisNight=()=>!0;}get isDone(){return this.gameState.People.some(e=>e.IsProtected);}requestProtectedPerson(t){return h(this,arguments,function*({Dialog:e}){try{let r=yield e.ShowPeopleSelectionDialog("Zu sch\xFCtzende Person ausw\xE4hlen",1);if(r[0]===this.lastProtectedPerson){if(!(yield e.ShowConfirmDialog("Es kann nicht zwei mal hinter einander die gleiche Person gesch\xFCtzt werden. Trotzdem fortfahren?")))return;}else if(r[0].Character instanceof S&&!(yield e.ShowConfirmDialog("Das kleine M\xE4dchen kann nicht vor den Werw\xF6lfen gesch\xFCtzt werden. Trotzdem fortfahren?")))return;this.lastProtectedPerson=r[0],r[0].IsProtected=!0;}catch{}});}};var B=class extends o{constructor(){super(...arguments),this.Id="hunter",this.Group=n.Passive,this.Game=s.BaseGame,this.Description=[{title:"Allgemein",description:"Wenn er von den Werw\xF6lfen verschlungen oder von den Dorfbewohnern hingerichtet wird, darf er sich vor seinem Ableben wehren und einen beliebigen Spieler bestimmen, der ebenfalls ausscheidet."},{title:":@@character-description-special-case:Sonderfall",description:"Wenn der J\xE4ger in einen Spieler verliebt ist, der aus der Partie ausscheidet, kann er vor seinem eigenen Ausscheiden sofort einen anderen Spieler seiner Wahl benennen, der ebenfalls ausscheidet. Das kann dazu f\xFChren, dass kein einziger Spieler \xFCberlebt. In diesem Fall hat keines der Lager gewonnen."}];}};var E=class extends o{constructor(){super(...arguments),this.Id="juggler",this.Group=n.Passive,this.Game=s.Characters,this.Priority=c.Initial+2,this.Description=[{title:"Allgemein",description:"Vor der Partie w\xE4hlt der Spielleiter drei Charaktere mit Spezialf\xE4higkeiten, welche er, nach dem Verteilen der Rollen, aufgedeckt in die Mitte des Spielbereiches legt. Jede Nacht, nach Aufruf durch den Spielleiter, darf der Gaukler eine dieser Karten ausw\xE4hlen und den gew\xE4hlten Charakter bis zur n\xE4chsten Nacht verk\xF6rpern. W\xE4hlt der Gaukler einen Charakter, so nimmt der Spielleiter diese Karte aus der Auswahl und entfernt sie aus dem Spiel."},{title:"Achtung",description:"Es darf kein Wolf f\xFCr die Auslage gew\xE4hlt werden."},{title:"Tipp f\xFCr den Spielleiter",description:"Mit der Wahl der Karten, die du dem Gaukler anbietest, kannst du Einfluss auf das Spiel nehmen und ein wenig Chaos im Dorf verbreiten - oder auch helfen, einem sehr starken Wolfsrudel entgegen zu wirken. Wenn auch der Dieb im Spiel ist, m\xFCssen zuerst die beiden Karten f\xFCr den Dieb bereitgelegt werden, erst danach die drei Karten f\xFCr den Gaukler."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Muss Rolle ausw\xE4hlen"],this.GetButtons=()=>this.isAssigned?[]:[l(this)],this.IsAwakeThisNight=()=>!0;}};var _=class extends o{constructor(){super(...arguments),this.Id="knight",this.Group=n.Passive,this.Game=s.Characters,this.Description=[{title:"Allgemein",description:"Wird der Ritter gefressen, so scheidet er aus dem Spiel aus \u2013 jedoch erleidet ein Wolf durch die verrostete Klinge eine Vergiftung. Von den schuldigen W\xF6lfen erliegt in der folgenden Nacht jener seiner t\xF6dlichen Wunde, welcher dem Ritter links am n\xE4chsten sass, nachdem er, trotz seiner Verletzung, einen ganzen Tag lang \xFCberlebte. Der Tod des Wolfes durch die Vergiftung wird am Morgen, nach der Nacht des Hinscheidens vom Spielleiter bekannt gegeben."},{title:":@@character-description-hint:Hinweis",description:"Clevere Spieler k\xF6nnen nun daraus folgern, dass alle Spieler die zwischen dem \u201CRitter der rostigen Klinge\u201D und dem erkrankten Werwolf sitzen, unschuldige Dorfbewohner sind."}];}};var R=class extends o{constructor(){super(...arguments),this.Id="old_man",this.Group=n.Passive,this.Game=s.Characters,this.Description=[{title:"Allgemein",description:"Er hat siegreich all die furchtbaren Pr\xFCfungen des Lebens durchschritten und eine Widerstandskraft ausserhalb des Gew\xF6hnlichen erreicht. Die Werw\xF6lfe m\xFCssen sich zweimal f\xFCr ihn entscheiden, um ihn zu verschlingen. Beim ersten Mal, sobald die Werw\xF6lfe den Alten des Dorfes reissen, \xFCberlebt er und der Spielleiter dreht seine Karte nicht um. Auch der Urwolf kann ihn nach dem ersten Biss nicht infizieren. Der Alte wird nur eliminiert, sobald er zweimal verschlungen wird. Die Abstimmung des Dorfes, der Gifttrank der Hexe, der Schuss des J\xE4gers oder das Rasiermesser des Barbiers eliminieren den Alten jedoch schon beim ersten Mal. Allerdings verlieren die Dorfbewohner ihre besonderen F\xE4higkeiten aus Verzweiflung dar\xFCber, einen solch hoch gelehrten Mann get\xF6tet zu haben."},{title:"Achtung",description:"Wenn der Alte von der Hexe geheilt wird, gewinnt er nur ein einziges Leben."},{title:"Variante f\xFCr Mutige",description:"Wenn der Dorfdepp bereits aufgedeckt ist, so scheidet er gemeinsam mit dem Alten aus, da das Dorf, welches nun seine Weisheit verloren hat, seine Entscheidung revidiert, den Dorfdeppen zu verschonen."}];}};var F=class extends o{constructor(){super(...arguments),this.Id="bitter_old_man",this.Group=n.Loners,this.Game=s.NewMoon,this.Priority=c.Initial+13,this.Description=[{title:"Allgemein",description:"Vor Anfang der Partie teilt der Spielleiter das Dorf in zwei Gruppen und verk\xFCndet dies laut. Dabei erfolgt die Einteilung aufgrund von offensichtlichen Kriterien (Geschlecht, Brille, Gr\xF6sse, Alter, Bart, etc.). Der Verbitterte Greis muss einer der beiden Gruppen eindeutig zugeordnet werden k\xF6nnen. Das Ziel dieses Charakters ist es, alle Spieler der jeweils anderen Gruppe zu eliminieren. In diesem Falle, und nur in diesem Falle, gewinnt er das Spiel ganz allein. Er besitzt dazu keine Sonderf\xE4higkeit \u2013 das Wort und seine F\xE4higkeit zu manipulieren sind seine einzigen Waffen."},{title:"Tipp f\xFCr den Spielleiter",description:"Es ist nicht notwendig, dass beide Gruppen gleich gross sind. Z\xF6gere im Zweifel nicht, alle Spieler darauf hinzuweisen, welcher Gruppe sie zugeh\xF6rig sind."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Kann direkt wieder schlafen gehen","Ist Teil einer h\xE4lfte der Spieler und versucht die andere H\xE4lfte umzubringen"],this.GetButtons=()=>this.isAssigned?[]:[l(this)],this.IsAwakeThisNight=e=>e<=0;}};var K=class extends g{constructor(){super(...arguments),this.Id="primal_wolf",this.Group=n.Wolves,this.Game=s.Characters,this.Priority=c.Wolf+3,this.Description=[{title:"Allgemein",description:"Jede Nacht erwacht der Urwolf mit den anderen Wolfen und sucht sich ein Opfer. Daraufhin darf er, sofern er m\xF6chte, nach dem Einschlafen der W\xF6lfe den Spielleiter durch Handzeichen darauf hinweisen, dass er seine Sonderf\xE4higkeit einsetzen und das letzte Opfer infizieren m\xF6chte. Diese F\xE4higkeit ist nur einmal im Spiel einsetzbar. Der Spielleiter ber\xFChrt daraufhin den Infizierten, welcher sofort zu einem Werwolf wird und ab der n\xE4chsten Nacht jede Nacht mit den W\xF6lfen zusammen erwacht und ein Opfer sucht. Sollte dieser Charakter eine nachtaktive Spezialf\xE4higkeit besitzen, erwacht der Spieler nach wie vor nach Aufruf durch den Spielleiter \u2013 zus\xE4tzlich zur Wolfsphase."}],this.isDone=!1,this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Kann Opfer zu Werwolf machen"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),this.isDone||e.push({Title:"Opfer zu Werwolf verwandeln",Action:this.requestVictimStateChangePerson.bind(this)}),e;},this.IsAwakeThisNight=(e,t)=>!(this.isDone||t.People.some(r=>r.IsDead&&this.isWerewolf(r)));}requestVictimStateChangePerson(t){return h(this,arguments,function*({GameState:e}){let r=e.People.find(a=>a.IsVictim);r&&(r.IsVictim=!1,r.IsWerewolf=!0,this.isDone=!0);});}};var M=class extends o{constructor(){super(...arguments),this.Id="scapegoat",this.Group=n.Passive,this.Game=s.NewMoon,this.Priority=c.Initial+12,this.Description=[{title:"Allgemein",description:"Wenn die Abstimmung des Dorfes eine Stimmengleichheit ergibt, so scheidet der S\xFCndenbock anstelle der beiden Charaktere mit gleicher Stimmenzahl aus. Es liegt bei ihm, so zu handeln, dass dieses traurige Ende verhindert wird. Wenn der S\xFCndenbock ausscheidet, bleibt ihm ein Vorrecht, das er aus\xFCben kann: Er bestimmt, wer am n\xE4chsten Tag abstimmen darf und wer nicht."},{title:"Achtung",description:"Wird nur 1 einziger Spieler bestimmt, der w\xE4hlen darf, so riskiert man, dass er in der folgenden Nacht von den Werw\xF6lfen verschlungen wird. Somit g\xE4be es also keine Abstimmung im Dorf. (Es sei denn nat\xFCrlich, der ausgew\xE4hlte Spieler ist selbst ein Werwolf oder die Werw\xF6lfe verschlingen ihn absichtlich nicht.)"}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Kann direkt wieder schlafen gehen","Wird bei unentschieden in Abstimmungen gew\xE4hlt"],this.GetButtons=()=>this.isAssigned?[]:[l(this)],this.IsAwakeThisNight=e=>e<=0;}};var H=class extends o{constructor(){super(...arguments),this.Id="seer",this.Group=n.Active,this.Game=s.BaseGame,this.Priority=c.Initial+4,this.Description=[{title:"Allgemein",description:"Jede Nacht erkennt sie die wahre Identit\xE4t eines Spielers ihrer Wahl. Sie muss den anderen Dorfbewohnern helfen, dabei aber sehr bedacht vorgehen, da sie sonst von den Werw\xF6lfen entdeckt wird."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Darf sich eine Karte anschauen"],this.GetButtons=()=>this.isAssigned?[]:[l(this)],this.IsAwakeThisNight=()=>!0;}};var O=class extends o{constructor(){super(...arguments),this.Id="sisters",this.Group=n.Active,this.Game=s.Characters,this.Priority=c.Initial+6,this.IsSingle=!1,this.Description=[{title:"Allgemein",description:"Die Zwei Schwestern sind vom selben Schlag wie die anderen Dorfbewohner und ziehen am selben Strang. Der Spielleiter ruft in der ersten Nacht die Zwei Schwestern auf, damit diese einander erkennen. In erfahrenen Spielrunden k\xF6nnen die Schwestern von Zeit zu Zeit (jede zweite Runde oder nach Gusto des Spielleiters) des Nachts wieder aufgerufen werden, um sich schnell und leise auf ein gemeinsames Vorgehen zur Rettung des Dorfes zu einigen."},{title:"Tipp f\xFCr den Spielleiter",description:"Die Zwei Schwestern sind ein m\xE4chtiges Instrument in H\xE4nden von Spielern, welche die Geb\xE4rdensprache beherrschen."}],this.GetActions=()=>[this.gameState.getPeopleForCharacter(this).length!==2&&"Personen zuweisen","D\xFCrfen sich untereinander austauschen"],this.GetButtons=()=>this.gameState.getPeopleForCharacter(this).length==2?[]:[z(this,2)],this.IsAwakeThisNight=e=>e%2===0;}};var j=class extends o{constructor(){super(...arguments),this.Id="thief",this.Group=n.Active,this.Game=s.BaseGame,this.Priority=c.Initial+1,this.Description=[{title:"Allgemein",description:"Wenn mit dieser Karte gespielt werden soll, m\xFCssen zwei Einfache Dorfbewohner zus\xE4tzlich vor Beginn der Partie dem Spiel hinzugef\xFCgt werden. Nachdem die Karten verteilt wurden, werden die beiden \xFCbrigen Karten verdeckt in die Tischmitte gelegt. In der ersten Nacht sieht sich der Dieb die beiden Karten an und darf seine eigene gegen eine der beiden Karten austauschen. Wenn beide Karten in der Tischmitte Werw\xF6lfe sind, muss er seine Karte gegen eine der Werwolf-Karten eintauschen. Er beh\xE4lt die nun gew\xE4hlte Identit\xE4t bis zum Spielende bei."}],this.GetActions=()=>["Muss Karten tauschen",!this.isAssigned&&"Person zuweisen"],this.GetButtons=()=>this.isAssigned?[]:[l(this)],this.IsAwakeThisNight=e=>e===0;}};var q=class extends o{constructor(){super(...arguments),this.Id="village_idiot",this.Group=n.Passive,this.Game=s.NewMoon,this.Description=[{title:"Allgemein",description:"Welches Dorf hat nicht seinen Dorfdeppen? Er macht ein wenig Unsinn, jedoch hat er ein so einnehmendes Wesen, dass ihm niemand etwas zuleide tun k\xF6nnte. Wenn das Dorf gegen ihn stimmt, dreht der Dorfdepp seine Karte um. Augenblicklich erkennen die Dorfbewohner ihren Irrtum und begnadigen ihn sofort. Von nun an spielt er weiter, hat jedoch sein Stimmrecht verloren. Was z\xE4hlt schon die Stimme eines Deppen. Es gibt keine neue Abstimmung in dieser Runde. Achtung: Wenn die Werw\xF6lfe ihn reissen, wird der Dorfdepp eliminiert. Wenn der Dorfdepp Hauptmann des Dorfes war, ist diese Rolle endg\xFCltig verloren. Wenn der J\xE4ger auf den Dorfdeppen schiesst, scheidet der Dorfdepp aus."}];}};var Z=class extends o{constructor(){super(...arguments),this.Id="villager",this.Group=n.Passive,this.Game=s.BaseGame,this.IsSingle=!1,this.Description=[{title:"Allgemein",description:"Er hat keine besonderen F\xE4higkeiten. Seine einzigen Waffen sind sein scharfer Sinn f\xFCr verd\xE4chtiges Verhalten und die F\xE4higkeit, die anderen von seiner Unschuld zu \xFCberzeugen."}];}};var v=class extends g{constructor(){super(...arguments),this.Id="werewolf",this.Game=s.BaseGame,this.Group=n.Wolves,this.Priority=c.Wolf+1,this.IsSingle=!1,this.Description=[{title:"Allgemein",description:"Jede Nacht frisst er einen Dorfbewohner. Tags\xFCber versucht er, seine wahre Identit\xE4t zu verbergen. Ein Werwolf kann auf gar keinen Fall einen anderen Werwolf fressen."}],this.GetActions=()=>[this.gameState.getPeopleForCharacter(this).length<=0&&"Person zuweisen",!this.isDone&&"M\xFCssen ein Opfer finden"],this.GetButtons=()=>{let e=[];return this.gameState.getPeopleForCharacter(this).length<=0&&e.push(z(this)),this.isDone||e.push({Title:"Opfer markieren",Action:this.registerVictim.bind(this)}),e;},this.IsAwakeThisNight=()=>!0;}get isDone(){return this.gameState.People.some(e=>e.IsVictim);}registerVictim(r){return h(this,arguments,function*({Dialog:e,GameState:t}){try{let a=yield e.ShowPeopleSelectionDialog("W\xE4hle das Opfer aus",1);if(a[0].IsProtected)return;t.People.forEach(d=>d.IsVictim=!1),a[0].IsVictim=!0;}catch{}});}};var L=class extends g{constructor(){super(...arguments),this.Id="white_wolf",this.Group=n.Wolves,this.Game=s.Characters,this.Priority=c.Wolf+2,this.Description=[{title:"Allgemein",description:"Dieser b\xF6sartige Charakter verabscheut die Werw\xF6lfe ebenso wie die Dorfbewohner. Jede Nacht erwacht der Weisse Werwolf mit den Werw\xF6lfen und sucht sich mit ihnen ein Opfer unter den Dorfbewohnern. Doch jede zweite Nacht erwacht er, nach Aufruf durch den Spielleiter, alleine in einer eigenen Phase und darf, wenn er mag, einen Werwolf t\xF6ten(jedoch keinen weiteren Dorfbewohner). Sein Ziel ist es, als einziger \xDCberlebender im Dorf zu verbleiben. Nur in diesem Fall gewinnt er die Partie."}],this.isDone=!1,this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.isDone&&"Kann einen Werwolf umbringen"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),this.isDone||e.push({Title:"Zweites Opfer markieren",Action:this.registerVictim.bind(this)}),e;},this.IsAwakeThisNight=e=>e%2==1,this.resetAfterNight=()=>this.isDone=!1;}registerVictim(t){return h(this,arguments,function*({Dialog:e}){try{let r=yield e.ShowPeopleSelectionDialog("W\xE4hle das Opfer (Werewolf) aus",1);if(r[0].IsProtected)return;r[0].IsVictim=!0,this.isDone=!0;}catch{}});}};var U=class extends o{constructor(){super(...arguments),this.Id="wild_child",this.Group=n.Wolves,this.Game=s.Characters,this.Priority=c.Initial+8,this.Description=[{title:"Allgemein",description:"Das Wilde Kind ist ein Dorfbewohner. In der ersten Nacht wird es vom Spielleiter aufgerufen und w\xE4hlt still sein Vorbild. Wird dieses im Laufe des Spiels get\xF6tet, so kehrt das Wilde Kind dem Dorf den R\xFCcken und geht zu den W\xF6lfen zur\xFCck. Von nun an erwacht es jede Nacht bis zum Ende des Spiels als Werwolf und sucht sich mit ihnen ein Opfer. Solange das Vorbild am Leben ist, bleibt das Wilde Kind ein Dorfbewohner. Selbst ein Werwolf als Vorbild \xE4ndert daran nichts. Ebenso kann sich das Wilde Kind daran beteiligen, sein Vorbild zu eliminieren \u2013 sofern es dies w\xFCnscht. Ist sein Vorbild im Spiel und sind alle W\xF6lfe ausgeschieden, gewinnt das Kind mit den Dorfbewohnern. Ist sein Vorbild ausgeschieden und die W\xF6lfe gewinnen, teilt es auch diesen Sieg."},{title:"Tipp f\xFCr den Spielleiter",description:"Es kann die Spannung erh\xF6hen, wenn die wahre Identit\xE4t des Kindes nicht verraten wird, sollte es durch die Wahl des Dorfes ausscheiden. So bleiben Zweifel, ob denn nun ein Dorfbewohner oder doch ein Werwolf eliminiert wurde."}],this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.isDone&&"Muss ein Vorbild w\xE4hlen","Wird zum Werwolf, wenn Vorbild stirbt"],this.GetButtons=()=>{let e=[];return this.isAssigned?this.isDone||e.push({Title:"Vorbild zuweisen",Action:this.requstRolemodel.bind(this)}):e.push(l(this)),e;},this.IsAwakeThisNight=e=>e===0;}get isDone(){return this.gameState.Connections.some(e=>e.ConnectionType===p.Trust);}requstRolemodel(r){return h(this,arguments,function*({GameState:e,Dialog:t}){try{let a=yield t.ShowPeopleSelectionDialog("W\xE4hle das Vorbild aus",1);e.addConnection(p.Trust,this.gameState.getPeopleForCharacter(this)[0],a[0]);}catch{}});}};var J=class extends o{constructor(){super(...arguments),this.Id="witch",this.Group=n.Active,this.Game=s.BaseGame,this.Priority=c.PostWolf+1,this.Description=[{title:"Allgemein",description:"Sie kann zwei sehr m\xE4chtige Zaubertr\xE4nke brauen: Einen Heiltrank, um einen Spieler, der Opfer der Werw\xF6lfe wurde, vor dem Tod zu bewahren. Und ein Gift, um des Nachts einen beliebigen Spieler zu vergiften und somit ausscheiden zu lassen. Die Hexe kann diese Zaubertr\xE4nke jeweils nur einmal im Verlauf einer Partie nutzen. Sie kann beide Zaubertr\xE4nke in derselben Nacht einsetzen. Am Morgen, nachdem die Hexe ihre F\xE4higkeit eingesetzt hat, kann es demnach keinen, 1 oder auch 2 Tote geben (ohne Ber\xFCcksichtigung der F\xE4higkeiten anderer Charaktere). Die Hexe kann den Heiltrank auch bei sich selbst anwenden, um sich zu heilen, wenn sie von den Werw\xF6lfen angegriffen wurde."}],this.hasPositivePotion=!0,this.hasNegativePotion=!0,this.GetActions=()=>[!this.isAssigned&&"Person zuweisen",!this.hasPositivePotion&&!this.hasNegativePotion&&"Hat keinen Zaubertrank mehr.",this.hasPositivePotion&&"Kann einen Heiltrank einsetzen",this.hasNegativePotion&&"Kann einen Gifttrank einsetzen"],this.GetButtons=()=>{let e=[];return this.isAssigned||e.push(l(this)),this.hasPositivePotion&&e.push({Title:"Retten",Action:this.requstSave.bind(this)}),this.hasNegativePotion&&e.push({Title:"Person vergiften",Action:this.requstKill.bind(this)}),e;},this.IsAwakeThisNight=()=>this.hasPositivePotion||this.hasNegativePotion;}requstSave(r){return h(this,arguments,function*({GameState:e,Dialog:t}){try{let a=yield t.ShowPeopleSelectionDialog("W\xE4hle das Opfer aus",1);if(!e.People.filter(u=>u.IsVictim).includes(a[0])&&!(yield t.ShowConfirmDialog("Die Person ist kein Wolfsopfer. Trotzdem Heiltrank verwenden?")))return;a[0].IsVictim=!1,this.hasPositivePotion=!1;}catch{}});}requstKill(t){return h(this,arguments,function*({Dialog:e}){try{let r=yield e.ShowPeopleSelectionDialog("W\xE4hle das Opfer aus",1);if(r[0].IsVictim&&!(yield e.ShowConfirmDialog("Die Person ist bereits ein Wolfsopfer. Trotzdem Zaubertrank verwenden?")))return;r[0].IsVictim=!0,this.hasNegativePotion=!1;}catch{}});}};var X=class extends o{constructor(){super(...arguments),this.Id="wolfdog",this.Group=n.Wolves,this.Game=s.Characters,this.Description=[{title:"Allgemein",description:"In der ersten Nacht entscheidet der Wolfshund, auf welcher Seite er spielen m\xF6chte: als Einfacher Dorfbewohner oder lieber als Einfacher Werwolf. Entscheidet er sich f\xFCr Letzteres, \xF6ffnet er einfach in der Wolfsphase mit allen anderen W\xF6lfen die Augen und sucht mit ihnen ein Opfer. Ansonsten beh\xE4lt er die Augen geschlossen und spielt aufseiten des Dorfes. Diese Entscheidung ist endg\xFCltig und gilt f\xFCr den Rest des Spiels. Ein Umentscheiden ist sp\xE4ter nicht mehr m\xF6glich."},{title:"Tipp f\xFCr den Spielleiter",description:"Ebenso wie beim Wilden Kind kann es die Spannung erh\xF6hen, wenn die wahre Identit\xE4t des Wolfshundes nicht verraten wird, sollte er durch die Wahl des Dorfes ausscheiden. So bleiben Zweifel, ob denn nun ein Dorfbewohner oder doch ein Werwolf eliminiert wurde."}];}};var m=[];for(let i=0;i<256;++i)m.push((i+256).toString(16).slice(1));function le(i,e=0){return(m[i[e+0]]+m[i[e+1]]+m[i[e+2]]+m[i[e+3]]+"-"+m[i[e+4]]+m[i[e+5]]+"-"+m[i[e+6]]+m[i[e+7]]+"-"+m[i[e+8]]+m[i[e+9]]+"-"+m[i[e+10]]+m[i[e+11]]+m[i[e+12]]+m[i[e+13]]+m[i[e+14]]+m[i[e+15]]).toLowerCase();}var ie,ue=new Uint8Array(16);function te(){if(!ie){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ie=crypto.getRandomValues.bind(crypto);}return ie(ue);}var pe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),re={randomUUID:pe};function me(i,e,t){if(re.randomUUID&&!e&&!i)return re.randomUUID();i=i||{};let r=i.random??i.rng?.()??te();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let a=0;a<16;++a)e[t+a]=r[a];return e;}return le(r);}var Q=me;var A=class i{get Id(){return this.id;}get Name(){return this.name;}set Name(e){this.name=e,this.onChanged();}get Character(){return this.character;}set Character(e){this.character=e,this.onChanged();}get IsProtected(){return this.isProtected;}set IsProtected(e){this.isProtected=e,this.onChanged();}get IsVictim(){return this.isVictim;}set IsVictim(e){this.isVictim=e,this.onChanged();}get IsEnchanted(){return this.isEnchanted;}set IsEnchanted(e){this.isEnchanted=e,this.onChanged();}get IsWerewolf(){return this.isWerewolf;}set IsWerewolf(e){this.isWerewolf=e,this.onChanged();}get IsDead(){return this.isDead;}set IsDead(e){this.isDead=e,this.onChanged();}constructor(e=()=>{}){this.onChanged=e,this.id=Q(),this.name="",this.isProtected=!1,this.isVictim=!1,this.isEnchanted=!1,this.isWerewolf=!1,this.isDead=!1;}resetPerson(){this.isProtected=!1,this.isVictim=!1,this.isEnchanted=!1,this.isWerewolf=!1,this.isDead=!1,this.character=void 0;}cloneWithoutEffectState(){let e=new i();return e.id=this.id,e.name=this.name,e.character=this.character,e;}asSerializeable(){return{id:this.id,name:this.name,isProtected:this.isProtected,isVictim:this.isVictim,isEnchanted:this.isEnchanted,isWerewolf:this.isWerewolf,isDead:this.isDead,character:this.character?.Id};}static fromSerializeable(e,t=()=>{}){let r=new i(t);return r.id=e.id??Q(),r.name=e.name??"",r.isProtected=e.isProtected??!1,r.isVictim=e.isVictim??!1,r.isEnchanted=e.isEnchanted??!1,r.isWerewolf=e.isWerewolf??!1,r.isDead=e.isDead??!1,r.character=e.character??void 0,r;}};var $=class i{get Round(){return this.round;}set Round(e){this.round=e,this.onChanged();}get People(){return this.people;}set People(e){this.people=e,this.onChanged();}get SelectedCharacters(){return this.selectedCharacters;}set SelectedCharacters(e){this.selectedCharacters=e,this.onChanged();}get Connections(){return this.connections;}set Connections(e){this.connections=e,this.onChanged();}constructor(e=()=>{}){this.onChanged=e,this.round=0,this.people=[],this.selectedCharacters=[],this.connections=[];}serialize(){return JSON.stringify({round:this.round,people:this.people.map(e=>e.asSerializeable()),selectedCharacters:this.selectedCharacters.map(e=>e.Id),connections:this.connections.map(e=>ne(G({},e),{From:e.From.Id,To:e.To.Id}))});}static deserialize(e,t,r=()=>{}){let a=new i(r);if(e){let d=JSON.parse(e,(u,w)=>u==="character"?t.find(D=>D.Id===w):u==="people"?w.map(D=>A.fromSerializeable(D,r)):u==="selectedCharacters"?w.map(D=>t.find(he=>he.Id===D)):w);a.round=d.round,a.people=d.people,a.selectedCharacters=d.selectedCharacters,a.connections=(d.connections??[]).map(u=>({ConnectionType:u?.ConnectionType??p.Love,From:d.people.find(w=>w.Id===u?.From),To:d.people.find(w=>w.Id===u?.To)})).filter(u=>u.From&&u.To);}return a;}reset(e){this.round=0,this.connections=[];for(let t of this.people)t.resetPerson();this.selectedCharacters=e,this.onChanged();}};var Y=class extends o{constructor(){super(...arguments),this.Id="judge",this.Group=n.Passive,this.Game=s.Characters,this.Description=[{title:"Allgemein",description:"Einmal im Spiel darf der Richter entscheiden, dass am Tage eine weitere Abstimmung des Dorfes mit einem zweiten Opfer stattfindet. Dies l\xE4sst er den Spielleiter durch ein vorher abgestimmtes, spezielles Zeichen w\xE4hrend der ersten Wahl der Bewohner wissen. Diese zweite Abstimmung folgt direkt nach der ersten \u2013 ohne weitere Diskussion. Der \"St-t-t- otternde Ri-ri-richter\" vereinbart dieses Zeichen mit dem Spielleiter, w\xE4hrend er in der ersten Nacht aufgerufen wird."},{title:"Tipp f\xFCr den Spielleiter",description:"Beobachte den Stotternden Richter stets genau, um sein Zeichen nicht zu \xFCbersehen."}],this.Priority=c.Initial+14,this.GetActions=()=>[!this.isAssigned&&"Person zuweisen","Muss Zeichen mit Spielleiter vereinbaren","Kann eine zweite Abstimmung anfordern indem er das Zeichen macht"],this.GetButtons=()=>this.isAssigned?[]:[l(this)],this.IsAwakeThisNight=e=>e<=0;}};var ee=class extends o{constructor(){super(...arguments),this.Id="maid",this.Group=n.Passive,this.Game=s.Characters,this.Description=[{title:"Allgemein",description:"Bevor die Karte eines Mitspielers, welcher durch die Wahl des Dorfes aus dem Spiel ausgeschieden ist, vom Spielleiter aufgedeckt wird, darf die Ergebene Magd sich offenbaren, indem sie ihre Karte aufdeckt. In diesem Falle verliert der Spieler der Magd seine Karte und erh\xE4lt im Gegenzug den Charakter des Spielers, der ausscheidet. Dieser Charakter wird den anderen Spielern nicht gezeigt und verbleibt im Besitz des Spielers, der ehemals die Magd verk\xF6rpert hat, bis dieser ausscheidet oder das Spiel endet."},{title:"Achtung",description:"Geh\xF6rt die Magd zum Liebespaar, hat sie diese Entscheidung nicht mehr. Die Macht der Liebe ist gr\xF6sser als der Wille, den Charakter zu \xE4ndern."},{title:"Tipp f\xFCr den Spielleiter",description:"Lass dir Zeit, bevor du den Spielern den ausgeschiedenen Charakter zeigst, damit du der Magd die M\xF6glichkeit gibst, sich zu offenbaren. \xDCbernimmt sie einen Charakter mit Spezialf\xE4higkeiten, so wird sie die folgenden N\xE4chte entsprechend des Charakters aufgerufen. Vor allem in der ersten Nacht solltest du die ehemalige Magd still darauf hinweisen, damit sie sich an ihre neue Rolle gew\xF6hnen kann. Grunds\xE4tzlich gilt, dass s\xE4mtliche Sonderf\xE4higkeiten des Charakters, den die Ergebene Magd erh\xE4lt, erneuert werden und dieser gespielt wird, als w\xE4re es die erste Nacht. Daf\xFCr wird jeder Effekt, der m\xF6glicherweise vorher auf dem ausgeschiedenen Spieler lag, annulliert."},{title:"Erl\xE4uterungen",description:"Wenn der ausgeschiedene Spieler infiziert, verliebt, verzaubert, Hauptmann, B\xFCttel oder Amor war bzw. ist, wird die ehemalige Ergebene Magd dies nicht. Wenn die ehemalige Ergebene Magd ver- zaubert, Hauptmann oder B\xFCttel war, ist sie dies nun nicht mehr. Wenn die ehemalige Ergebene Magd: infiziert war, ist sie dies weiterhin; Fl\xF6tenspieler wird, teilt der Spielleiter diesem neuen Fl\xF6tenspieler mit, welche Spieler zuvor verzaubert worden sind; Gaukler, B\xFCttel oder Zigeunerin wird: Es werden keine zus\xE4tzlichen Karten verteilt; es werden lediglich die noch nicht eingesetzten Karten weiter verwendet."}];}};var tn=(()=>{class i{get Round(){return this.gameState.Round;}get Connections(){return this.gameState.Connections;}get AllCharacters(){return this.allCharacters;}get People(){return this.gameState.People;}set People(t){this.gameState.People=t,this.saveState();}get SelectedCharacters(){return this.gameState.SelectedCharacters;}set SelectedCharacters(t){this.gameState.SelectedCharacters=t,this.saveState();}get InGame(){return this.appState.inGame;}set InGame(t){this.appState.inGame=t,this.saveState();}get MusicStarted(){return this.appState.spotify.musicStarted;}set MusicStarted(t){this.appState.spotify.musicStarted=t,this.saveState();}get CurrentDeviceId(){return this.appState.spotify.currentDevice;}set CurrentDeviceId(t){this.appState.spotify.currentDevice=t,this.saveState();}constructor(){if(this.allCharacters=[],this.gameState=new $(this.saveState.bind(this)),this.appState={inGame:!1,spotify:{musicStarted:!1,currentDevice:void 0}},this.Actions=[],this.ActionHistory=[],this.Changes=[],this.resetCharacters(),!oe.isTesting)try{this.gameState=$.deserialize(window.localStorage.getItem("werewolf-game-state"),this.allCharacters,this.saveState.bind(this)),this.Actions=this.getActionsForNight(),this.appState=G({inGame:!1,spotify:{musicStarted:!1,currentDevice:void 0}},JSON.parse(window.localStorage.getItem("werewolf-app-state")??"{}")),window.state={game:this.gameState,app:this.appState};}catch{window.localStorage.removeItem("werewolf-game-state");}}addPerson(){let t=new A(this.saveState.bind(this));this.gameState.People=[...this.gameState.People,t];}removePerson(t){this.gameState.People=this.gameState.People.filter(r=>r!==t);}addConnection(t,r,a){this.gameState.Connections=[...this.gameState.Connections.filter(d=>d.ConnectionType!==t),{ConnectionType:t,From:r,To:a}],this.saveState();}removeConnection(t){this.gameState.Connections=this.gameState.Connections.filter(r=>r.ConnectionType!==t),this.saveState();}startGame(){this.InGame=!0,this.resetGame(),this.Actions=[],this.ActionHistory=[],this.Actions=this.getActionsForNight();}startNextRound(){this.gameState.Round++;for(let t of this.gameState.SelectedCharacters)t.resetAfterNight();this.ActionHistory=[],this.Actions=this.getActionsForNight(),this.saveState();}getActionsForNight(){return[...(this.gameState.Round===0?[new P(this)]:[]),ce,...this.SelectedCharacters.filter(this.filterActiveActions.bind(this)).sort((t,r)=>t.Priority-r.Priority),new C(this)];}filterActiveActions(t){if(t instanceof v)return!0;if(!t.IsAwakeThisNight(this.gameState.Round,this))return!1;let r=this.getPeopleForCharacter(t);return!(r.length>0&&r.every(a=>a.IsDead));}getPeopleForCharacter(t){return this.gameState.People.filter(r=>r.Character===t);}resetGame(){this.resetCharacters();let t=this.gameState.SelectedCharacters.map(a=>a.Id),r=this.allCharacters.filter(a=>t.includes(a.Id));this.gameState.reset(r);}resetCharacters(){this.allCharacters=[new k(this),new b(this),new W(this),new I(this),new y(this),new T(this),new x(this),new N(this),new V(this),new B(this),new Y(this),new E(this),new _(this),new ee(this),new R(this),new F(this),new K(this),new M(this),new H(this),new O(this),new S(this),new j(this),new q(this),new Z(this),new v(this),new L(this),new U(this),new J(this),new X(this)];}saveState(){window.localStorage.setItem("werewolf-game-state",this.gameState.serialize()),window.localStorage.setItem("werewolf-app-state",JSON.stringify(this.appState));}nextAction(){let t=this.Actions.shift();t&&(this.ActionHistory.push(t),this.Actions.length<=0?this.startNextRound():this.Actions.length===1&&(this.Changes=this.getChangesOnNightOver(),this.ActionHistory=[]));}previousAction(){let t=this.ActionHistory.pop();t&&this.Actions.unshift(t);}getChangesOnNightOver(){let t=[];t.push(...this.getVictimChanges());let r=t.map(a=>a.person);for(let a of r)t.push(...this.handleConsequenceofDeath(a));return t;}handleConsequenceofDeath(t,r=!1,a=!1){let d=[];if(!a){let u=this.getLoveConnectionChanges(t);a=!!u,d.push(u);}if(d.push(this.getTrustConnectionChanges(t)),!r){d.push(this.getSleepoverConnectionChanges(t));let u=d.filter(Boolean).map(w=>this.handleConsequenceofDeath(w.person,!0,a)).flat();d.push(...u);}return d.filter(Boolean);}getVictimChanges(){let t=[];for(let r of this.People)r.IsVictim&&!r.IsProtected&&t.push({person:r,reason:f.DiedGotKilled,isApplied:!1,apply:()=>{r.IsVictim=!1,r.IsDead=!0;}});return t;}getSleepoverConnectionChanges(t){let r=this.Connections.find(a=>a.ConnectionType===p.Sleepover);if(r?.To===t)return{person:r.From,reason:f.DiedSleptWithVictim,isApplied:!1,apply:()=>{r.From.IsDead=!0;}};}getTrustConnectionChanges(t){let r=this.Connections.find(a=>a.ConnectionType===p.Trust);if(r?.To===t)return{person:r.From,reason:f.TurnedIntoWolf,isApplied:!1,apply:()=>{r.From.IsWerewolf=!0;}};}getLoveConnectionChanges(t){let r=this.Connections.find(a=>a.ConnectionType===p.Love);if(r?.From===t||r?.To===t){let a=r.From===t?r.To:r.From;return{person:a,reason:f.DiedOfBrokenHeart,isApplied:!1,apply:()=>{a.IsDead=!0;}};}}static{this.ɵfac=function(r){return new(r||i)();};}static{this.ɵprov=se({token:i,factory:i.ɵfac,providedIn:"root"});}}return i;})();export{p as a,n as b,s as c,de as d,ae as e,we as f,ze as g,be as h,oe as i,tn as j};/**i18n:4d237bd4a7924989e9147be91c316aeb32cdd902c29b123d66e18fd31eb96ec1*/